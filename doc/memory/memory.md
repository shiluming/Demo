# Java 内存模型  
1. **主存储器(main memory)** 和 **工作存储器(working memory)**  
2. **synchronized** 的两项功能  
3. **volatile** 的两项功能  
3. **Dobule checked locking pattern** 的危险性  

### working memory & main memory  
- main memory 就是实例位置所在的区域，所有的实例都存在于主存储器中，主存储器是
所有现场共享的  
- working memory 为各个线程所拥有的作业区，所有的线程都有其专用的工作存储器，在工作
存储器内，存在有主存储器中必要部分拷贝，称之为工作拷贝(working copy)  

- 字段的引用  
线程无法对主存储器直接进行操作，因此它也无法直接引用字段的值。当线程欲引用字段的值
时，会一次将值从主存储器拷贝到工作存储器上(read-load 过程)。通过此拷贝所得到的值，
会成为工作拷贝，拷贝完成后，线程就会引用工作拷贝  
当同一个线程再度引用统一字段的值的时候，线程或许会引用刚才所制作的工作拷贝，也可能会重新
从主存储器拷贝到工作存储，然后才引用工作拷贝，至于具体采用哪种，是由Java执行处理系统来决定  

- 指定字段  
线程值无法直接对主存储进行操作，因此它也无法将值直接指定给字段。
当线程欲将值指定给字段时，会一次将值指定给位于工作存储器上的工作拷贝(assign)，指定完成后,
工作拷贝的内容便会映射到主存储器(store-write)。  


### 六个操作(都是不可分割的最小单位)  
- read/write :   
-- read 负责从主存储器拷贝到工作存储器  
-- write 与上述相反  
- use/assign  
-- use 表示线程引用工作存储器的值  
-- assign 意指线程将该值指定给工作存储器  
- lock/unlock  
-- lock 表示线程将取得锁定  
-- unlock 表示线程解除锁定  


### synchronized 的两项功能  





